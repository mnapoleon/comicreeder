{"ts":1342554521043,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var fs = require(\"fs\");\r\nvar request = require(\"request\");\r\nvar querystring = require(\"querystring\");\r\nvar Parse = require(\"parse-api\").Parse;\r\n\r\nvar APP_ID = 'uKoPYsEPCuxyfZT3M5lyTytsiyZij0RHCSY1VuZ4';\r\nvar MASTER_KEY = '3Vszj1HJQo488dfXmDZi32fKFczwn7dqrjoyRydQ';\r\n\r\nvar parseApp = new Parse(APP_ID, MASTER_KEY);\r\n\r\nfunction start(req, resp, postData) {\r\n    \"use strict\";\r\n    console.log(\"req handler 'start' was called.\");\r\n\r\n    if (req.method === 'GET') {\r\n        var s = fs.createReadStream(\"./comicEntryForm.html\");\r\n        s.on('error',function() {\r\n            resp.writeHead(404);\r\n            resp.end();\r\n        });\r\n        s.once('fd', function() {\r\n          resp.writeHead(200);\r\n        });\r\n        s.pipe(resp);\r\n    }\r\n}\r\n\r\nfunction saveComic(req, resp, postData) {\r\n  console.log(\"Request handler for 'saveComic' was called.\");\r\n  console.log(\"PData: \" + postData);\r\n  var cName = querystring.parse(postData).comicName;\r\n  var wName = querystring.parse(postData).writerName;\r\n  var issueNo = querystring.parse(postData).issueNo;\r\n  var pub = querystring.parse(postData).publisher;\r\n  console.log(cName + \":\" + wName + \":\" + issueNo + \":\" + pub);\r\n  parseApp.insert('Comic', {comicName:cName, Writer:wName, publisher:pub, issue:issueNo},\r\n    function(err, response) {\r\n      console.log(response);\r\n    });\r\n  resp.writeHead(200, {\"Content-Type\": \"text/plain\"});\r\n  resp.write(\"Comic saved\" + querystring.parse(postData).comicName);\r\n  resp.end();\r\n}\r\n\r\nexports.start = start;\r\nexports.saveComic = saveComic;"]],"start1":0,"start2":0,"length1":0,"length2":1533}]],"length":1533}
{"contributors":[],"silentsave":false,"ts":1342554542995,"patch":[[{"diffs":[[0,"ic saved"],[1," "],[0,"\" + quer"]],"start1":1406,"start2":1406,"length1":16,"length2":17}]],"length":1534,"saved":false}
